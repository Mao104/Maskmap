{"remainingRequest":"/Users/chole/Desktop/demo0513/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/chole/Desktop/demo0513/src/App.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/chole/Desktop/demo0513/src/App.vue","mtime":1599988632189},{"path":"/Users/chole/Desktop/demo0513/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/chole/Desktop/demo0513/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/chole/Desktop/demo0513/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/chole/Desktop/demo0513/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBMIGZyb20gJ2xlYWZsZXQnOwppbXBvcnQgY2l0eU5hbWUgZnJvbSAnLi9hc3NldHMvY2l0eU5hbWUuanNvbic7CgpsZXQgb3NtTWFwID0ge307Cgpjb25zb2xlLmxvZyhMKTsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdBcHAnLAogIGRhdGE6ICgpID0+ICh7CiAgICBkYXRhOiBbXSwKICAgIGNpdHlOYW1lLAogICAgc2VsZWN0OiB7CiAgICAgIGNpdHk6ICfoh7rljJfluIInLAogICAgfSwKICB9KSwKICBtZXRob2RzOiB7CiAgICB1cGRhdGVNYXAoKSB7CiAgICAgIGNvbnN0IHBoYXJtYWNpZXMgPSB0aGlzLmRhdGEuZmlsdGVyKChwaGFybWFjeSkgPT4gKAogICAgICAgIHBoYXJtYWN5LnByb3BlcnRpZXMuY291bnR5ID09PSB0aGlzLnNlbGVjdC5jaXR5KSk7CgogICAgICBwaGFybWFjaWVzLmZvckVhY2goKHBoYXJtYWN5KSA9PiB7CiAgICAgICAgY29uc3QgeyBwcm9wZXJ0aWVzLCBnZW9tZXRyeSB9ID0gcGhhcm1hY3k7CiAgICAgICAgTC5tYXJrZXIoWwogICAgICAgICAgZ2VvbWV0cnkuY29vcmRpbmF0ZXNbMV0sCiAgICAgICAgICBnZW9tZXRyeS5jb29yZGluYXRlc1swXSwKICAgICAgICBdKS5hZGRUbyhvc21NYXApLmJpbmRQb3B1cChgCiAgICAgICAgICA8c3Ryb25nPiR7cHJvcGVydGllcy5uYW1lfTwvc3Ryb25nPiA8YnI+CiAgICAgICAgICDlj6PnvanlianppJjvvJo8c3Ryb25nPuaIkOS6uiAtICR7cHJvcGVydGllcy5tYXNrX2FkdWx0ID8gYCR7cHJvcGVydGllcy5tYXNrX2FkdWx0fSDlgItgIDogJ+acquWPluW+l+izh+aWmSd9LyDlhZLnq6UgLSAke3Byb3BlcnRpZXMubWFza19jaGlsZCA/IGAke3Byb3BlcnRpZXMubWFza19jaGlsZH0g5YCLYCA6ICfmnKrlj5blvpfos4fmlpknfTwvc3Ryb25nPjxicj4KICAgICAgICAgIOWcsOWdgDogPGEgaHJlZj0iaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS50dy9tYXBzL3BsYWNlLyR7cHJvcGVydGllcy5hZGRyZXNzfSIgdGFyZ2V0PSJfYmxhbmsiPiR7cHJvcGVydGllcy5hZGRyZXNzfTwvYT48YnI+CiAgICAgICAgICDpm7voqbE6ICR7cHJvcGVydGllcy5waG9uZX08YnI+CiAgICAgICAgICA8c21hbGw+5pyA5b6M5pu05paw5pmC6ZaTOiAke3Byb3BlcnRpZXMudXBkYXRlZH08L3NtYWxsPmApOwoKICAgICAgICBjb25zb2xlLmxvZyhwcm9wZXJ0aWVzKTsKICAgICAgfSk7CiAgICAgIHRoaXMucGFuVG8ocGhhcm1hY2llc1swXSk7CiAgICB9LAogICAgcmVtb3ZlTWFya2VyKCkgewogICAgICBvc21NYXAuZWFjaExheWVyKChsYXllcikgPT4gewogICAgICAgIGlmIChsYXllciBpbnN0YW5jZW9mIEwuTWFya2VyKSB7CiAgICAgICAgICBvc21NYXAucmVtb3ZlTGF5ZXIobGF5ZXIpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgcGFuVG8oaXRlbSkgewogICAgICBjb25zdCB7IHByb3BlcnRpZXMsIGdlb21ldHJ5IH0gPSBpdGVtOwogICAgICBjb25zb2xlLmxvZyhwcm9wZXJ0aWVzKTsKICAgICAgb3NtTWFwLnBhblRvKFtnZW9tZXRyeS5jb29yZGluYXRlc1sxXSwgZ2VvbWV0cnkuY29vcmRpbmF0ZXNbMF1dKTsKICAgIH0sCiAgfSwKICBtb3VudGVkKCkgewogICAgY29uc3QgdXJsID0gJ2h0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9raWFuZy9waGFybWFjaWVzL21hc3Rlci9qc29uL3BvaW50cy5qc29uJzsKICAgIHRoaXMuJGh0dHAuZ2V0KHVybCkKICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgdGhpcy5kYXRhID0gcmVzcG9uc2UuZGF0YS5mZWF0dXJlczsKICAgICAgICB0aGlzLnVwZGF0ZU1hcCgpOwogICAgICB9KTsKICAgIG9zbU1hcCA9IEwubWFwKCdtYXAnLCB7CiAgICAgIGNlbnRlcjogWzI1LjAzLCAxMjEuNTVdLAogICAgICB6b29tOiAxNSwKICAgIH0pOwogICAgTC50aWxlTGF5ZXIoJ2h0dHBzOi8ve3N9LnRpbGUub3BlbnN0cmVldG1hcC5vcmcve3p9L3t4fS97eX0ucG5nJywgewogICAgICBhdHRyaWJ1dGlvbjogJ01hcCBkYXRhICZjb3B5OyA8YSBocmVmPSJodHRwczovL3d3dy5vcGVuc3RyZWV0bWFwLm9yZy8iPk9wZW5TdHJlZXRNYXA8L2E+IGNvbnRyaWJ1dG9ycycsCiAgICAgIG1heFpvb206IDE4LAogICAgfSkuYWRkVG8ob3NtTWFwKTsKICB9LAp9Owo="},{"version":3,"sources":["App.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwDA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"App.vue","sourceRoot":"src","sourcesContent":["<template>\n  <div id=\"app\">\n    <div class=\"row no-gutters\">\n      <div class=\"col-sm-3\">\n        <div class=\"toolbox\">\n          <div class=\"sticky-top bg-white shadow-sm p-2\">\n            <div class=\"form-group d-flex\">\n              <label for=\"cityName\" class=\"mr-2 col-form-label text-right\">縣市</label>\n                <div class=\"flex-fill\">\n                  <select id=\"cityName\" class=\"form-control\"\n                      v-model=\"select.city\" @change=\"removeMarker(); updateMap()\">\n                      <option value=\"\">-- Select One --</option>\n                      <option :value=\"c.CityName\" v-for=\"c in cityName\" :key=\"c.CityName\">\n                        {{ c.CityName }}\n                      </option>\n                  </select>\n                    </div>\n                  </div>\n                  <div class=\"form-group d-flex\">\n                    <label for=\"area\" class=\"mr-2 col-form-label text-right\">地區</label>\n                    <div class=\"flex-fill\">\n                    <select id=\"area\" class=\"form-control\" v-model=\"select.area\">\n                      <option value=\"\">請選擇地區</option>\n                      <option :value=\"a.AreaName\" v-for=\"a in cityName.find((city) =>\n                        city.CityName === select.city).AreaList\" :key=\"a.AreaName\">\n                      {{ a.AreaName }}\n                    </option>\n                    </select>\n                    </div>\n                    </div>\n                    <p class=\"mb-0 small text-muted text-right\">請先選擇區域查看（綠色表示還有口罩）</p>\n</div>\n    <ul class=\"list-group\">\n    <template>\n    <a class=\"list-group-item text-left\">\n    <h3>藥局名稱</h3>\n    <p class=\"mb-0\">\n    成人口罩：1 | 兒童口罩：2\n    </p>\n    <p class=\"mb-0\">地址：<a href=\"https://www.google.com.tw/maps/place/...\"\n    target=\"_blank\" title=\"Google Map\">\n    地址</a>\n    </p>\n    </a>\n    </template>\n    </ul>\n    </div>\n    </div>\n    <div class=\"col-sm-9\">\n    <div id=\"map\"></div>\n    </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport L from 'leaflet';\nimport cityName from './assets/cityName.json';\n\nlet osmMap = {};\n\nconsole.log(L);\nexport default {\n  name: 'App',\n  data: () => ({\n    data: [],\n    cityName,\n    select: {\n      city: '臺北市',\n    },\n  }),\n  methods: {\n    updateMap() {\n      const pharmacies = this.data.filter((pharmacy) => (\n        pharmacy.properties.county === this.select.city));\n\n      pharmacies.forEach((pharmacy) => {\n        const { properties, geometry } = pharmacy;\n        L.marker([\n          geometry.coordinates[1],\n          geometry.coordinates[0],\n        ]).addTo(osmMap).bindPopup(`\n          <strong>${properties.name}</strong> <br>\n          口罩剩餘：<strong>成人 - ${properties.mask_adult ? `${properties.mask_adult} 個` : '未取得資料'}/ 兒童 - ${properties.mask_child ? `${properties.mask_child} 個` : '未取得資料'}</strong><br>\n          地址: <a href=\"https://www.google.com.tw/maps/place/${properties.address}\" target=\"_blank\">${properties.address}</a><br>\n          電話: ${properties.phone}<br>\n          <small>最後更新時間: ${properties.updated}</small>`);\n\n        console.log(properties);\n      });\n      this.panTo(pharmacies[0]);\n    },\n    removeMarker() {\n      osmMap.eachLayer((layer) => {\n        if (layer instanceof L.Marker) {\n          osmMap.removeLayer(layer);\n        }\n      });\n    },\n    panTo(item) {\n      const { properties, geometry } = item;\n      console.log(properties);\n      osmMap.panTo([geometry.coordinates[1], geometry.coordinates[0]]);\n    },\n  },\n  mounted() {\n    const url = 'https://raw.githubusercontent.com/kiang/pharmacies/master/json/points.json';\n    this.$http.get(url)\n      .then((response) => {\n        this.data = response.data.features;\n        this.updateMap();\n      });\n    osmMap = L.map('map', {\n      center: [25.03, 121.55],\n      zoom: 15,\n    });\n    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n      attribution: 'Map data &copy; <a href=\"https://www.openstreetmap.org/\">OpenStreetMap</a> contributors',\n      maxZoom: 18,\n    }).addTo(osmMap);\n  },\n};\n</script>\n\n<style lang=\"scss\">\n@import 'bootstrap/scss/bootstrap';\n\n#map {\n  height: 100vh;\n}\n\n.highlight {\n  background: #e9ffe3;\n}\n.toolbox {\n  height: 100vh;\n  overflow-y: auto;\n  a {\n    cursor: pointer;\n  }\n}\n\n</style>\n"]}]}