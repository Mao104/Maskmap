{"remainingRequest":"/Users/chole/Public/text/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/chole/Public/text/src/App.vue?vue&type=style&index=0&lang=scss&","dependencies":[{"path":"/Users/chole/Public/text/src/App.vue","mtime":1599988632189},{"path":"/Users/chole/Public/text/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/chole/Public/text/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/chole/Public/text/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/chole/Public/text/node_modules/sass-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/chole/Public/text/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/chole/Public/text/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgpAaW1wb3J0ICdib290c3RyYXAvc2Nzcy9ib290c3RyYXAnOwoKI21hcCB7CiAgaGVpZ2h0OiAxMDB2aDsKfQoKLmhpZ2hsaWdodCB7CiAgYmFja2dyb3VuZDogI2U5ZmZlMzsKfQoudG9vbGJveCB7CiAgaGVpZ2h0OiAxMDB2aDsKICBvdmVyZmxvdy15OiBhdXRvOwogIGEgewogICAgY3Vyc29yOiBwb2ludGVyOwogIH0KfQoK"},{"version":3,"sources":["App.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6HA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"App.vue","sourceRoot":"src","sourcesContent":["<template>\n  <div id=\"app\">\n    <div class=\"row no-gutters\">\n      <div class=\"col-sm-3\">\n        <div class=\"toolbox\">\n          <div class=\"sticky-top bg-white shadow-sm p-2\">\n            <div class=\"form-group d-flex\">\n              <label for=\"cityName\" class=\"mr-2 col-form-label text-right\">縣市</label>\n                <div class=\"flex-fill\">\n                  <select id=\"cityName\" class=\"form-control\"\n                      v-model=\"select.city\" @change=\"removeMarker(); updateMap()\">\n                      <option value=\"\">-- Select One --</option>\n                      <option :value=\"c.CityName\" v-for=\"c in cityName\" :key=\"c.CityName\">\n                        {{ c.CityName }}\n                      </option>\n                  </select>\n                    </div>\n                  </div>\n                  <div class=\"form-group d-flex\">\n                    <label for=\"area\" class=\"mr-2 col-form-label text-right\">地區</label>\n                    <div class=\"flex-fill\">\n                    <select id=\"area\" class=\"form-control\" v-model=\"select.area\">\n                      <option value=\"\">請選擇地區</option>\n                      <option :value=\"a.AreaName\" v-for=\"a in cityName.find((city) =>\n                        city.CityName === select.city).AreaList\" :key=\"a.AreaName\">\n                      {{ a.AreaName }}\n                    </option>\n                    </select>\n                    </div>\n                    </div>\n                    <p class=\"mb-0 small text-muted text-right\">請先選擇區域查看（綠色表示還有口罩）</p>\n</div>\n    <ul class=\"list-group\">\n    <template>\n    <a class=\"list-group-item text-left\">\n    <h3>藥局名稱</h3>\n    <p class=\"mb-0\">\n    成人口罩：1 | 兒童口罩：2\n    </p>\n    <p class=\"mb-0\">地址：<a href=\"https://www.google.com.tw/maps/place/...\"\n    target=\"_blank\" title=\"Google Map\">\n    地址</a>\n    </p>\n    </a>\n    </template>\n    </ul>\n    </div>\n    </div>\n    <div class=\"col-sm-9\">\n    <div id=\"map\"></div>\n    </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport L from 'leaflet';\nimport cityName from './assets/cityName.json';\n\nlet osmMap = {};\n\nconsole.log(L);\nexport default {\n  name: 'App',\n  data: () => ({\n    data: [],\n    cityName,\n    select: {\n      city: '臺北市',\n    },\n  }),\n  methods: {\n    updateMap() {\n      const pharmacies = this.data.filter((pharmacy) => (\n        pharmacy.properties.county === this.select.city));\n\n      pharmacies.forEach((pharmacy) => {\n        const { properties, geometry } = pharmacy;\n        L.marker([\n          geometry.coordinates[1],\n          geometry.coordinates[0],\n        ]).addTo(osmMap).bindPopup(`\n          <strong>${properties.name}</strong> <br>\n          口罩剩餘：<strong>成人 - ${properties.mask_adult ? `${properties.mask_adult} 個` : '未取得資料'}/ 兒童 - ${properties.mask_child ? `${properties.mask_child} 個` : '未取得資料'}</strong><br>\n          地址: <a href=\"https://www.google.com.tw/maps/place/${properties.address}\" target=\"_blank\">${properties.address}</a><br>\n          電話: ${properties.phone}<br>\n          <small>最後更新時間: ${properties.updated}</small>`);\n\n        console.log(properties);\n      });\n      this.panTo(pharmacies[0]);\n    },\n    removeMarker() {\n      osmMap.eachLayer((layer) => {\n        if (layer instanceof L.Marker) {\n          osmMap.removeLayer(layer);\n        }\n      });\n    },\n    panTo(item) {\n      const { properties, geometry } = item;\n      console.log(properties);\n      osmMap.panTo([geometry.coordinates[1], geometry.coordinates[0]]);\n    },\n  },\n  mounted() {\n    const url = 'https://raw.githubusercontent.com/kiang/pharmacies/master/json/points.json';\n    this.$http.get(url)\n      .then((response) => {\n        this.data = response.data.features;\n        this.updateMap();\n      });\n    osmMap = L.map('map', {\n      center: [25.03, 121.55],\n      zoom: 15,\n    });\n    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n      attribution: 'Map data &copy; <a href=\"https://www.openstreetmap.org/\">OpenStreetMap</a> contributors',\n      maxZoom: 18,\n    }).addTo(osmMap);\n  },\n};\n</script>\n\n<style lang=\"scss\">\n@import 'bootstrap/scss/bootstrap';\n\n#map {\n  height: 100vh;\n}\n\n.highlight {\n  background: #e9ffe3;\n}\n.toolbox {\n  height: 100vh;\n  overflow-y: auto;\n  a {\n    cursor: pointer;\n  }\n}\n\n</style>\n"]}]}