{"remainingRequest":"/Users/chole/Desktop/demo0513/node_modules/babel-loader/lib/index.js!/Users/chole/Desktop/demo0513/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/chole/Desktop/demo0513/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/chole/Desktop/demo0513/src/App.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/chole/Desktop/demo0513/src/App.vue","mtime":1599988632189},{"path":"/Users/chole/Desktop/demo0513/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/chole/Desktop/demo0513/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/chole/Desktop/demo0513/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/chole/Desktop/demo0513/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaCI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBMIGZyb20gJ2xlYWZsZXQnOwppbXBvcnQgY2l0eU5hbWUgZnJvbSAnLi9hc3NldHMvY2l0eU5hbWUuanNvbic7CnZhciBvc21NYXAgPSB7fTsKY29uc29sZS5sb2coTCk7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnQXBwJywKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZGF0YTogW10sCiAgICAgIGNpdHlOYW1lOiBjaXR5TmFtZSwKICAgICAgc2VsZWN0OiB7CiAgICAgICAgY2l0eTogJ+iHuuWMl+W4gicKICAgICAgfQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIHVwZGF0ZU1hcDogZnVuY3Rpb24gdXBkYXRlTWFwKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdmFyIHBoYXJtYWNpZXMgPSB0aGlzLmRhdGEuZmlsdGVyKGZ1bmN0aW9uIChwaGFybWFjeSkgewogICAgICAgIHJldHVybiBwaGFybWFjeS5wcm9wZXJ0aWVzLmNvdW50eSA9PT0gX3RoaXMuc2VsZWN0LmNpdHk7CiAgICAgIH0pOwogICAgICBwaGFybWFjaWVzLmZvckVhY2goZnVuY3Rpb24gKHBoYXJtYWN5KSB7CiAgICAgICAgdmFyIHByb3BlcnRpZXMgPSBwaGFybWFjeS5wcm9wZXJ0aWVzLAogICAgICAgICAgICBnZW9tZXRyeSA9IHBoYXJtYWN5Lmdlb21ldHJ5OwogICAgICAgIEwubWFya2VyKFtnZW9tZXRyeS5jb29yZGluYXRlc1sxXSwgZ2VvbWV0cnkuY29vcmRpbmF0ZXNbMF1dKS5hZGRUbyhvc21NYXApLmJpbmRQb3B1cCgiXG4gICAgICAgICAgPHN0cm9uZz4iLmNvbmNhdChwcm9wZXJ0aWVzLm5hbWUsICI8L3N0cm9uZz4gPGJyPlxuICAgICAgICAgIFx1NTNFM1x1N0Y2OVx1NTI2OVx1OTkxOFx1RkYxQTxzdHJvbmc+XHU2MjEwXHU0RUJBIC0gIikuY29uY2F0KHByb3BlcnRpZXMubWFza19hZHVsdCA/ICIiLmNvbmNhdChwcm9wZXJ0aWVzLm1hc2tfYWR1bHQsICIgXHU1MDBCIikgOiAn5pyq5Y+W5b6X6LOH5paZJywgIi8gXHU1MTUyXHU3QUU1IC0gIikuY29uY2F0KHByb3BlcnRpZXMubWFza19jaGlsZCA/ICIiLmNvbmNhdChwcm9wZXJ0aWVzLm1hc2tfY2hpbGQsICIgXHU1MDBCIikgOiAn5pyq5Y+W5b6X6LOH5paZJywgIjwvc3Ryb25nPjxicj5cbiAgICAgICAgICBcdTU3MzBcdTU3NDA6IDxhIGhyZWY9XCJodHRwczovL3d3dy5nb29nbGUuY29tLnR3L21hcHMvcGxhY2UvIikuY29uY2F0KHByb3BlcnRpZXMuYWRkcmVzcywgIlwiIHRhcmdldD1cIl9ibGFua1wiPiIpLmNvbmNhdChwcm9wZXJ0aWVzLmFkZHJlc3MsICI8L2E+PGJyPlxuICAgICAgICAgIFx1OTZGQlx1OEE3MTogIikuY29uY2F0KHByb3BlcnRpZXMucGhvbmUsICI8YnI+XG4gICAgICAgICAgPHNtYWxsPlx1NjcwMFx1NUY4Q1x1NjZGNFx1NjVCMFx1NjY0Mlx1OTU5MzogIikuY29uY2F0KHByb3BlcnRpZXMudXBkYXRlZCwgIjwvc21hbGw+IikpOwogICAgICAgIGNvbnNvbGUubG9nKHByb3BlcnRpZXMpOwogICAgICB9KTsKICAgICAgdGhpcy5wYW5UbyhwaGFybWFjaWVzWzBdKTsKICAgIH0sCiAgICByZW1vdmVNYXJrZXI6IGZ1bmN0aW9uIHJlbW92ZU1hcmtlcigpIHsKICAgICAgb3NtTWFwLmVhY2hMYXllcihmdW5jdGlvbiAobGF5ZXIpIHsKICAgICAgICBpZiAobGF5ZXIgaW5zdGFuY2VvZiBMLk1hcmtlcikgewogICAgICAgICAgb3NtTWFwLnJlbW92ZUxheWVyKGxheWVyKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIHBhblRvOiBmdW5jdGlvbiBwYW5UbyhpdGVtKSB7CiAgICAgIHZhciBwcm9wZXJ0aWVzID0gaXRlbS5wcm9wZXJ0aWVzLAogICAgICAgICAgZ2VvbWV0cnkgPSBpdGVtLmdlb21ldHJ5OwogICAgICBjb25zb2xlLmxvZyhwcm9wZXJ0aWVzKTsKICAgICAgb3NtTWFwLnBhblRvKFtnZW9tZXRyeS5jb29yZGluYXRlc1sxXSwgZ2VvbWV0cnkuY29vcmRpbmF0ZXNbMF1dKTsKICAgIH0KICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICB2YXIgdXJsID0gJ2h0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9raWFuZy9waGFybWFjaWVzL21hc3Rlci9qc29uL3BvaW50cy5qc29uJzsKICAgIHRoaXMuJGh0dHAuZ2V0KHVybCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgX3RoaXMyLmRhdGEgPSByZXNwb25zZS5kYXRhLmZlYXR1cmVzOwoKICAgICAgX3RoaXMyLnVwZGF0ZU1hcCgpOwogICAgfSk7CiAgICBvc21NYXAgPSBMLm1hcCgnbWFwJywgewogICAgICBjZW50ZXI6IFsyNS4wMywgMTIxLjU1XSwKICAgICAgem9vbTogMTUKICAgIH0pOwogICAgTC50aWxlTGF5ZXIoJ2h0dHBzOi8ve3N9LnRpbGUub3BlbnN0cmVldG1hcC5vcmcve3p9L3t4fS97eX0ucG5nJywgewogICAgICBhdHRyaWJ1dGlvbjogJ01hcCBkYXRhICZjb3B5OyA8YSBocmVmPSJodHRwczovL3d3dy5vcGVuc3RyZWV0bWFwLm9yZy8iPk9wZW5TdHJlZXRNYXA8L2E+IGNvbnRyaWJ1dG9ycycsCiAgICAgIG1heFpvb206IDE4CiAgICB9KS5hZGRUbyhvc21NYXApOwogIH0KfTs="},{"version":3,"sources":["App.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwDA,OAAA,CAAA,MAAA,SAAA;AACA,OAAA,QAAA,MAAA,wBAAA;AAEA,IAAA,MAAA,GAAA,EAAA;AAEA,OAAA,CAAA,GAAA,CAAA,CAAA;AACA,eAAA;AACA,EAAA,IAAA,EAAA,KADA;AAEA,EAAA,IAAA,EAAA;AAAA,WAAA;AACA,MAAA,IAAA,EAAA,EADA;AAEA,MAAA,QAAA,EAAA,QAFA;AAGA,MAAA,MAAA,EAAA;AACA,QAAA,IAAA,EAAA;AADA;AAHA,KAAA;AAAA,GAFA;AASA,EAAA,OAAA,EAAA;AACA,IAAA,SADA,uBACA;AAAA;;AACA,UAAA,UAAA,GAAA,KAAA,IAAA,CAAA,MAAA,CAAA,UAAA,QAAA;AAAA,eACA,QAAA,CAAA,UAAA,CAAA,MAAA,KAAA,KAAA,CAAA,MAAA,CAAA,IADA;AAAA,OAAA,CAAA;AAGA,MAAA,UAAA,CAAA,OAAA,CAAA,UAAA,QAAA,EAAA;AAAA,YACA,UADA,GACA,QADA,CACA,UADA;AAAA,YACA,QADA,GACA,QADA,CACA,QADA;AAEA,QAAA,CAAA,CAAA,MAAA,CAAA,CACA,QAAA,CAAA,WAAA,CAAA,CAAA,CADA,EAEA,QAAA,CAAA,WAAA,CAAA,CAAA,CAFA,CAAA,EAGA,KAHA,CAGA,MAHA,EAGA,SAHA,+BAIA,UAAA,CAAA,IAJA,4FAKA,UAAA,CAAA,UAAA,aAAA,UAAA,CAAA,UAAA,eAAA,OALA,8BAKA,UAAA,CAAA,UAAA,aAAA,UAAA,CAAA,UAAA,eAAA,OALA,mGAMA,UAAA,CAAA,OANA,kCAMA,UAAA,CAAA,OANA,+CAOA,UAAA,CAAA,KAPA,0EAQA,UAAA,CAAA,OARA;AAUA,QAAA,OAAA,CAAA,GAAA,CAAA,UAAA;AACA,OAbA;AAcA,WAAA,KAAA,CAAA,UAAA,CAAA,CAAA,CAAA;AACA,KApBA;AAqBA,IAAA,YArBA,0BAqBA;AACA,MAAA,MAAA,CAAA,SAAA,CAAA,UAAA,KAAA,EAAA;AACA,YAAA,KAAA,YAAA,CAAA,CAAA,MAAA,EAAA;AACA,UAAA,MAAA,CAAA,WAAA,CAAA,KAAA;AACA;AACA,OAJA;AAKA,KA3BA;AA4BA,IAAA,KA5BA,iBA4BA,IA5BA,EA4BA;AAAA,UACA,UADA,GACA,IADA,CACA,UADA;AAAA,UACA,QADA,GACA,IADA,CACA,QADA;AAEA,MAAA,OAAA,CAAA,GAAA,CAAA,UAAA;AACA,MAAA,MAAA,CAAA,KAAA,CAAA,CAAA,QAAA,CAAA,WAAA,CAAA,CAAA,CAAA,EAAA,QAAA,CAAA,WAAA,CAAA,CAAA,CAAA,CAAA;AACA;AAhCA,GATA;AA2CA,EAAA,OA3CA,qBA2CA;AAAA;;AACA,QAAA,GAAA,GAAA,4EAAA;AACA,SAAA,KAAA,CAAA,GAAA,CAAA,GAAA,EACA,IADA,CACA,UAAA,QAAA,EAAA;AACA,MAAA,MAAA,CAAA,IAAA,GAAA,QAAA,CAAA,IAAA,CAAA,QAAA;;AACA,MAAA,MAAA,CAAA,SAAA;AACA,KAJA;AAKA,IAAA,MAAA,GAAA,CAAA,CAAA,GAAA,CAAA,KAAA,EAAA;AACA,MAAA,MAAA,EAAA,CAAA,KAAA,EAAA,MAAA,CADA;AAEA,MAAA,IAAA,EAAA;AAFA,KAAA,CAAA;AAIA,IAAA,CAAA,CAAA,SAAA,CAAA,oDAAA,EAAA;AACA,MAAA,WAAA,EAAA,yFADA;AAEA,MAAA,OAAA,EAAA;AAFA,KAAA,EAGA,KAHA,CAGA,MAHA;AAIA;AA1DA,CAAA","sourcesContent":["<template>\n  <div id=\"app\">\n    <div class=\"row no-gutters\">\n      <div class=\"col-sm-3\">\n        <div class=\"toolbox\">\n          <div class=\"sticky-top bg-white shadow-sm p-2\">\n            <div class=\"form-group d-flex\">\n              <label for=\"cityName\" class=\"mr-2 col-form-label text-right\">縣市</label>\n                <div class=\"flex-fill\">\n                  <select id=\"cityName\" class=\"form-control\"\n                      v-model=\"select.city\" @change=\"removeMarker(); updateMap()\">\n                      <option value=\"\">-- Select One --</option>\n                      <option :value=\"c.CityName\" v-for=\"c in cityName\" :key=\"c.CityName\">\n                        {{ c.CityName }}\n                      </option>\n                  </select>\n                    </div>\n                  </div>\n                  <div class=\"form-group d-flex\">\n                    <label for=\"area\" class=\"mr-2 col-form-label text-right\">地區</label>\n                    <div class=\"flex-fill\">\n                    <select id=\"area\" class=\"form-control\" v-model=\"select.area\">\n                      <option value=\"\">請選擇地區</option>\n                      <option :value=\"a.AreaName\" v-for=\"a in cityName.find((city) =>\n                        city.CityName === select.city).AreaList\" :key=\"a.AreaName\">\n                      {{ a.AreaName }}\n                    </option>\n                    </select>\n                    </div>\n                    </div>\n                    <p class=\"mb-0 small text-muted text-right\">請先選擇區域查看（綠色表示還有口罩）</p>\n</div>\n    <ul class=\"list-group\">\n    <template>\n    <a class=\"list-group-item text-left\">\n    <h3>藥局名稱</h3>\n    <p class=\"mb-0\">\n    成人口罩：1 | 兒童口罩：2\n    </p>\n    <p class=\"mb-0\">地址：<a href=\"https://www.google.com.tw/maps/place/...\"\n    target=\"_blank\" title=\"Google Map\">\n    地址</a>\n    </p>\n    </a>\n    </template>\n    </ul>\n    </div>\n    </div>\n    <div class=\"col-sm-9\">\n    <div id=\"map\"></div>\n    </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport L from 'leaflet';\nimport cityName from './assets/cityName.json';\n\nlet osmMap = {};\n\nconsole.log(L);\nexport default {\n  name: 'App',\n  data: () => ({\n    data: [],\n    cityName,\n    select: {\n      city: '臺北市',\n    },\n  }),\n  methods: {\n    updateMap() {\n      const pharmacies = this.data.filter((pharmacy) => (\n        pharmacy.properties.county === this.select.city));\n\n      pharmacies.forEach((pharmacy) => {\n        const { properties, geometry } = pharmacy;\n        L.marker([\n          geometry.coordinates[1],\n          geometry.coordinates[0],\n        ]).addTo(osmMap).bindPopup(`\n          <strong>${properties.name}</strong> <br>\n          口罩剩餘：<strong>成人 - ${properties.mask_adult ? `${properties.mask_adult} 個` : '未取得資料'}/ 兒童 - ${properties.mask_child ? `${properties.mask_child} 個` : '未取得資料'}</strong><br>\n          地址: <a href=\"https://www.google.com.tw/maps/place/${properties.address}\" target=\"_blank\">${properties.address}</a><br>\n          電話: ${properties.phone}<br>\n          <small>最後更新時間: ${properties.updated}</small>`);\n\n        console.log(properties);\n      });\n      this.panTo(pharmacies[0]);\n    },\n    removeMarker() {\n      osmMap.eachLayer((layer) => {\n        if (layer instanceof L.Marker) {\n          osmMap.removeLayer(layer);\n        }\n      });\n    },\n    panTo(item) {\n      const { properties, geometry } = item;\n      console.log(properties);\n      osmMap.panTo([geometry.coordinates[1], geometry.coordinates[0]]);\n    },\n  },\n  mounted() {\n    const url = 'https://raw.githubusercontent.com/kiang/pharmacies/master/json/points.json';\n    this.$http.get(url)\n      .then((response) => {\n        this.data = response.data.features;\n        this.updateMap();\n      });\n    osmMap = L.map('map', {\n      center: [25.03, 121.55],\n      zoom: 15,\n    });\n    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n      attribution: 'Map data &copy; <a href=\"https://www.openstreetmap.org/\">OpenStreetMap</a> contributors',\n      maxZoom: 18,\n    }).addTo(osmMap);\n  },\n};\n</script>\n\n<style lang=\"scss\">\n@import 'bootstrap/scss/bootstrap';\n\n#map {\n  height: 100vh;\n}\n\n.highlight {\n  background: #e9ffe3;\n}\n.toolbox {\n  height: 100vh;\n  overflow-y: auto;\n  a {\n    cursor: pointer;\n  }\n}\n\n</style>\n"],"sourceRoot":"src"}]}